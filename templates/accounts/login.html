{% extends 'base.html' %}

{% load static %}

{% load crispy_forms_tags %}

{% block content %}

<!--********************* *********************  Login Form  *******************************************************-->
<div class="container shadow-md p-4 form-layout border form-background">
    <h3 class="text-center mb-4" style="color: white;">Login to Your Account</h3>
    <hr>
    <br>

    <form method="post" action="{% url 'login' %}">

        {% csrf_token %}

        <!-- Username Field -->
        <div class="form-group">
            {{ form.username|as_crispy_field }}
        </div>

        <!-- Password Field -->
        <div class="form-group">
            {{ form.password|as_crispy_field }}
        </div>

        <!-- Submit Button -->
        <div class="form-group">
            <button type="submit" class="btn btn-block p-2 fancy-btn">
                <i class="fa fa-key" aria-hidden="true"></i> &nbsp; Login
            </button>
        </div>

        <!-- Non-field errors -->
        <div class="form-group">
            {{ form.non_field_errors }}
        </div>

        <!-- Forgot password and Register Links -->
        <div class="text-center">
            <p class="mt-3" style="color: white; font-weight: bold;">Don't have an account? <a href="{% url 'register' %}" class="link-style">Register here</a></p>
            <!-- Forgot password link -->
            <p><a href="{% url 'password_reset' %}" class="link-style">Forgot your password?</a></p>
        </div>
    </form>
</div>

<!-- Optional: Custom CSS for better responsiveness -->
<style>
    .form-background
    {
        background-image: url('/static/images/login_background.jpg');
    }
    .fancy-btn {
        background-image: url('/static/images/button_back.jpg');
    }

    /* Add spacing between fields */
    .form-group {
        margin-bottom: 20px;
    }

    .form-group input {
        width: 100%;
        /* Make sure input fields take full width */
    }

    /* Styling for username and password text */
    .form-group label {
        color: white;
        font-weight: bold;
    }

    /* Custom link styles for Register and Forgot Password */
    .link-style {
        color: #007bff;
        /* Default link color */
    }

    .link-style:hover {
        text-decoration: underline;
        color: #0056b3;
        /* Darker color on hover */
    }

    /* Styling for the form container */
    .text-center a {
        color: #adb2b7;

    }

    .text-center a:hover {
        text-decoration: underline;
        color: #0e74db;
    }
    /* Style for error list */
ul.errorlist.nonfield {
    background-color: white; /* White background for the error list */
    color: red; /* Red text color for visibility */
    padding: 10px; /* Add some padding for spacing */
    border: 1px solid #ddd; /* Light border around the error box */
    border-radius: 5px; /* Rounded corners */
    list-style-type: none; /* Remove default list styling */
    margin: 0; /* Remove default margin */
}

/* Optional: Style the individual error items */
ul.errorlist.nonfield li {
    margin-bottom: 5px; /* Space between each error message */
}
</style>

<script>
        // Wait until the DOM is loaded
        window.onload = function() {
            // Check if the error list exists and remove it after page load
            var errorList = document.getElementsByClassName('errorlist nonfield');
            if (errorList) {
                // Hide the error list upon page load
                errorList.style.display = 'none';
            }
        };
    </script>
{% endblock %}
